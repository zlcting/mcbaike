<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    

    <title>萌宠百科-注册</title>
    <meta name="keywords" content="萌宠百科-注册">
    <meta name="description" content="萌宠百科-注册">
    <link rel="shortcut icon" href="favicon.ico"> <link href="__PUBLIC__/hplus/css/bootstrap.min.css?v=3.3.5" rel="stylesheet">
    <link href="__PUBLIC__/hplus/css/font-awesome.min.css?v=4.4.0" rel="stylesheet">
    <link href="__PUBLIC__/hplus/css/animate.min.css" rel="stylesheet">
    <link href="__PUBLIC__/hplus/css/style.min.css?v=4.0.0" rel="stylesheet"><base target="_blank">

</head>

<body class="gray-bg">
       <!--  <div class="middle-box text-center loginscreen   animated fadeInDown"> -->
    <div class="wrapper wrapper-content animated fadeInRight">
        <div class="row">
            <div class="col-sm-6">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>注册</h5>
                    </div>
                    <div class="ibox-content">
                        <form class="form-horizontal m-t" id="signupForm" action="{:U('user/check_login')}" method="post" target = "_self">
                           <!--  <div class="form-group has-error">
                                <label class="col-sm-3 control-label">姓氏：</label>
                                <div class="col-sm-8">
                                    <input id="firstname" name="firstname" class="form-control" type="text">
                                    <span class="help-block m-b-none"><i class="fa fa-info-circle"></i> 这里写点提示的内容</span>
                                    <span id="lastname-error" class="help-block m-b-none"><i class="fa fa-times-circle"></i> 请输入您的名字</span>
                                </div>
                            </div>
                            <div class="form-group has-success">
                                <label class="col-sm-3 control-label">名字：</label>
                                <div class="col-sm-8">
                                    <input id="lastname" name="lastname" class="form-control" type="text" aria-required="true" aria-invalid="false" class="valid">
                                </div>
                            </div> -->
                            <div class="form-group">
                                <label class="col-sm-3 control-label">用户名：</label>
                                <div class="col-sm-8">
                                    <input id="username" name="username" class="form-control" type="text" aria-required="true" aria-invalid="true" class="error">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">密码：</label>
                                <div class="col-sm-8">
                                    <input id="password" name="password" class="form-control" type="password">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">确认密码：</label>
                                <div class="col-sm-8">
                                    <input id="confirm_password" name="confirm_password" class="form-control" type="password">
                                    <span class="help-block m-b-none"><i class="fa fa-info-circle"></i> 请再次输入您的密码</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">E-mail：</label>
                                <div class="col-sm-8">
                                    <input id="email" name="email" class="form-control" type="email">
                                </div>
                            </div>
                            <div class="form-group" id = "div_var_code">
                                <div class="col-sm-8 col-sm-offset-3">
                                    <div class="checkbox">
                                    <label class="no-padding">
                                         <img id="verify_img" alt="点击更换" title="点击更换" src="{:U('public/verify',array())}" class="m" onclick="this.src='{:U('public/verify',array())}?'+Math.random()">
                                    </label>
                                    </div>
                                    <div class="checkbox i-checks ">

                                        <label class="no-padding">
                                            验证码：
                                        </label>

                                        <label class="no-padding">
                                         <input id="j_verify"
                                             name="code" type="text" class="form-control x164 in">
                                         </label>

                                         <!-- <span id="span_var_code" class="help-block m-b-none" style="display: none;"><i class="fa fa-times-circle has-error" ></i> 验证码错误</span> -->
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-8 col-sm-offset-3">
                                    <button class="btn btn-primary" type="button" onclick="form_submit()">提交</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="__PUBLIC__/hplus/js/jquery.min.js?v=2.1.4"></script>
    <script src="__PUBLIC__/hplus/js/bootstrap.min.js?v=3.3.5"></script>
    <script src="__PUBLIC__/hplus/js/content.min.js?v=1.0.0"></script>
    <script src="__PUBLIC__/hplus/js/plugins/validate/jquery.validate.min.js"></script>
    <script src="__PUBLIC__/hplus/js/plugins/validate/messages_zh.min.js"></script>
    <script src="__PUBLIC__/hplus/js/demo/form-validate-demo.min.js"></script>
</body>

<script type="text/javascript">

    function form_submit() {
        //ajax 校验 验证码   待解决：异步验证后不能再次验证 
      $.post("{:U('user/ajaxCheck')}", { code: $("#j_verify").val() },
            function(data){
                if(data == 1){
                    $("#div_var_code").addClass('has-success');
                    $("#span_var_code").display();
                } else {
                    $("#div_var_code").addClass('has-error');
                    $("#span_var_code").show();
                }
            }
       );
        //提交表单
       $("#signupForm").submit();
    }

</script>
</html>